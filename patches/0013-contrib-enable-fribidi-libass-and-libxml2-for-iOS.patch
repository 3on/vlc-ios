From d46f03dc1615081eeaf4da5044fe9f055363fbef Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Felix=20Paul=20K=C3=BChne?= <fkuehne@videolan.org>
Date: Fri, 3 May 2013 14:30:04 +0200
Subject: [PATCH 13/13] contrib: enable fribidi, libass, and libxml2 for iOS

---
 contrib/src/ass/rules.mak   |  5 +++++
 extras/package/ios/build.sh | 13 +++++++------
 2 files changed, 12 insertions(+), 6 deletions(-)

diff --git a/contrib/src/ass/rules.mak b/contrib/src/ass/rules.mak
index e9470e3..05ad6a6 100644
--- a/contrib/src/ass/rules.mak
+++ b/contrib/src/ass/rules.mak
@@ -11,9 +11,14 @@ ifdef HAVE_ANDROID
 WITH_FONTCONFIG = 0
 WITH_HARFBUZZ = 0
 else
+ifdef HAVE_IOS
+WITH_FONTCONFIG = 0
+WITH_HARFBUZZ = 1
+else
 WITH_FONTCONFIG = 1
 WITH_HARFBUZZ = 1
 endif
+endif
 
 $(TARBALLS)/libass-$(ASS_VERSION).tar.gz:
 	$(call download,$(ASS_URL))
diff --git a/extras/package/ios/build.sh b/extras/package/ios/build.sh
index fa813c5..636a104 100755
--- a/extras/package/ios/build.sh
+++ b/extras/package/ios/build.sh
@@ -191,10 +191,7 @@ fi
     --enable-small \
     --disable-sdl \
     --disable-SDL_image \
-    --disable-fontconfig \
-    --disable-ass \
     --disable-iconv \
-    --disable-fribidi \
     --disable-zvbi \
     --disable-kate \
     --disable-caca \
@@ -214,7 +211,11 @@ fi
     --disable-libmpeg2 \
     --disable-chromaprint \
     --disable-mad \
+    --enable-fribidi \
+    --enable-libxml2 \
     --enable-freetype2 \
+    --enable-ass \
+    --disable-fontconfig \
     --disable-taglib > ${out}
 
 echo "EXTRA_CFLAGS += ${EXTRA_CFLAGS}" >> config.mak
@@ -279,7 +280,7 @@ ${VLCROOT}/configure \
     --disable-faad \
     --disable-lua \
     --disable-a52 \
-    --disable-fribidi \
+    --enable-fribidi \
     --disable-macosx-audio \
     --disable-qt --disable-skins2 \
     --disable-libgcrypt \
@@ -297,8 +298,8 @@ ${VLCROOT}/configure \
     --enable-dvbpsi \
     --enable-swscale \
     --disable-projectm \
-    --disable-libass \
-    --disable-libxml2 \
+    --enable-libass \
+    --enable-libxml2 \
     --disable-goom \
     --disable-dvdread \
     --disable-dvdnav \
-- 
1.7.12.4 (Apple Git-37)

